# Listen 80

LoadModule actions_module modules/mod_actions.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so
LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so

<Directory "/var/www">
  Options Indexes FollowSymLinks
  AllowOverride All
</Directory>

<VirtualHost *:80>
  DocumentRoot "/usr/local/apache2/htdocs/public"

  ProxyPassMatch "(?!:/ws)" "fcgi://fpm:9000/app/public/index.php"

  <Location "/ws">
    ProxyPass "ws://ws/"
    ProxyPassReverse "ws://ws/"
  </Location>
</VirtualHost>